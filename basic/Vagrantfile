####
#
#	ubuntu_dev/basic
#
$my_name = "u1404-dev-basic"

# super_script
#
$linux_script = <<SSCRIPT
export DEBIAN_FRONTEND=noninteractive

echo "UPDATING linux"
apt-get update

echo "*** UPGRADING distribution"
apt-get dist-upgrade -qy \
	-o Dpkg::Options::="--force-confdef" \
	-o Dpkg::Options::="--force-confold" 

echo "*** INSTALLING build-essential git gitk"
echo "*** INSTALLING python python3 python-dev python-serial python3-serial "
echo "*** INSTALLING openjdk-7-jre openjdk-7-jdk  "
echo "*** INSTALLING libusb-dev libreadline-dev "
echo "*** INSTALLING linux-headers-generic linux-image-extra-virtual linux-firmware "
echo "*** INSTALLING emacs emacs24-el git-el tree unzip"

apt-get install -qy --force-yes \
	build-essential firefox git gitk\
	python python3 python-dev python-serial python3-serial \
	openjdk-7-jre openjdk-7-jdk \
	libusb-dev libreadline-dev \
	linux-headers-generic linux-image-extra-virtual linux-firmware \
	emacs emacs24-el git-el tree unzip

echo "*** INSTALLING CCS prereqs"
dpkg --add-architecture i386
apt-get install -qy --force-yes \
        libc6:i386 libx11-6:i386 libasound2:i386 libatk1.0-0:i386 libcairo2:i386 libcups2:i386 libdbus-glib-1-2:i386 libgconf-2-4:i386 libgdk-pixbuf2.0-0:i386 libgtk-3-0:i386 libice6:i386 libncurses5:i386 libsm6:i386 liborbit2:i386 libudev1:i386 libusb-0.1-4:i386 libstdc++6:i386 libxt6:i386 libxtst6:i386 libgnomeui-0:i386 libusb-1.0-0-dev:i386 libcanberra-gtk-module:i386 gtk2-engines-murrine:i386 unzip

#echo "*** ? stow automake autoconf libtool libc6-dev"
#echo "*** ? git-core git-daemon-run git-doc git-email git-gui gitmagic"
#echo "*** ? openssh-client openssh-server vim aptitude"
SSCRIPT

Vagrant.configure(2) do |config|
	config.vm.box = 'trusty64'
	config.vm.box_url = 'https://cloud-images.ubuntu.com/vagrant/trusty/20160830/trusty-server-cloudimg-amd64-vagrant-disk1.box'
	config.vm.box_download_checksum = 'e3e6c708ec2388a633512b6efe0ee3081d1780171ed474cc210d70731a1f7a5a'
	config.vm.box_download_checksum_type = 'sha256'

	config.ssh.insert_key = false

	config.vm.provision 'shell', inline: $linux_script
	config.vm.provision "shell", path: "../common/compact.sh"

	config.vm.define $my_name do |config|
		config.vm.hostname = $my_name
		config.vm.provider 'virtualbox' do |vb, override|
			vb.name = $my_name
			override.vm.synced_folder "~/", "/home/vagrant/home" # optional, useful for rapid development
	        vb.customize ["modifyvm", :id, "--memory", 1024]
		end
	end
end
